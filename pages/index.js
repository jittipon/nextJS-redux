import Head from 'next/head'
import Image from 'next/image'
import styles from '../styles/Home.module.scss'
import 'bootstrap/dist/css/bootstrap.min.css';
import AddTodoForm from '../components/Todo/AddTodoForm';
import TodoList from '../components/Todo/TodoList';
import TotalCompleteItems from '../components/Todo/TotalCompleteItems';
import Link from 'next/link';
import toast from 'react-hot-toast';
import { Box } from '@chakra-ui/react'
import { useContext } from 'react';
import { UserContext } from '../lib/context';
import { useEffect } from 'react';

export default function Home() {
  let isLogin = false;
  const { user, username } = useContext(UserContext);
  
  useEffect(() => {
    console.log(isLogin);
    if(username != null)
    {
      isLogin = true;
    console.log("isLogin = true");
    
  } else {
    isLogin = false;
    console.log("isLogin = false");
    }
  }, []);

  console.log(username);

  return (
    <div className={styles.container}>
      <Head>
        <title>Redux NextJS</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main >
        {username && (
          <>
              <h1 className={styles.title}>Jittipon.resume.website</h1>

            {/* <button className='btn btn-success' onClick={() => toast.success('hello toast!')}>
          Toast Me
        </button> */}
            <Link href="/Result" >
              <a>another page</a>
            </Link>

            <AddTodoForm />
            <TodoList />
            <TotalCompleteItems />
          </>
        )}

        {!username && isLogin && (
          <div className={styles.welcome}>
            <h1>Loader</h1>
          </div>

        )}

        {!username && !isLogin && (
          <div className={styles.welcome}>
            <h1>please login with your google account too see my project (safe for sure!)</h1>
          </div>

        )}



      </main>

    </div>
  )
}
